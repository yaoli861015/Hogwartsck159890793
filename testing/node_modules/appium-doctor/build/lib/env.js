"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = void 0;

require("source-map-support/register");

var _appiumSupport = require("appium-support");

var _doctor = require("./doctor");

var _utils = require("./utils");

require("colors");

class EnvVarAndPathCheck extends _doctor.DoctorCheck {
  constructor(varName) {
    super();
    this.varName = varName;
  }

  async diagnose() {
    let varValue = process.env[this.varName];

    if (typeof varValue === 'undefined') {
      return (0, _utils.nok)(`${this.varName} environment variable is NOT set!`);
    }

    return (await _appiumSupport.fs.exists(varValue)) ? (0, _utils.ok)(`${this.varName} is set to: ${varValue}`) : (0, _utils.nok)(`${this.varName} is set to '${varValue}' but this is NOT a valid path!`);
  }

  fix() {
    return `Make sure the environment variable ${this.varName.bold} is properly configured for the Appium process. ` + `Refer https://github.com/appium/java-client/blob/master/docs/environment.md for more details.`;
  }

}

var _default = EnvVarAndPathCheck;
exports.default = _default;require('source-map-support').install();


//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImxpYi9lbnYuanMiXSwibmFtZXMiOlsiRW52VmFyQW5kUGF0aENoZWNrIiwiRG9jdG9yQ2hlY2siLCJjb25zdHJ1Y3RvciIsInZhck5hbWUiLCJkaWFnbm9zZSIsInZhclZhbHVlIiwicHJvY2VzcyIsImVudiIsImZzIiwiZXhpc3RzIiwiZml4IiwiYm9sZCJdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7O0FBQUE7O0FBQ0E7O0FBQ0E7O0FBQ0E7O0FBR0EsTUFBTUEsa0JBQU4sU0FBaUNDLG1CQUFqQyxDQUE2QztBQUMzQ0MsRUFBQUEsV0FBVyxDQUFFQyxPQUFGLEVBQVc7QUFDcEI7QUFDQSxTQUFLQSxPQUFMLEdBQWVBLE9BQWY7QUFDRDs7QUFFRCxRQUFNQyxRQUFOLEdBQWtCO0FBQ2hCLFFBQUlDLFFBQVEsR0FBR0MsT0FBTyxDQUFDQyxHQUFSLENBQVksS0FBS0osT0FBakIsQ0FBZjs7QUFDQSxRQUFJLE9BQU9FLFFBQVAsS0FBb0IsV0FBeEIsRUFBcUM7QUFDbkMsYUFBTyxnQkFBSyxHQUFFLEtBQUtGLE9BQVEsbUNBQXBCLENBQVA7QUFDRDs7QUFDRCxXQUFPLE9BQU1LLGtCQUFHQyxNQUFILENBQVVKLFFBQVYsQ0FBTixJQUE0QixlQUFJLEdBQUUsS0FBS0YsT0FBUSxlQUFjRSxRQUFTLEVBQTFDLENBQTVCLEdBQ0wsZ0JBQUssR0FBRSxLQUFLRixPQUFRLGVBQWNFLFFBQVMsaUNBQTNDLENBREY7QUFFRDs7QUFFREssRUFBQUEsR0FBRyxHQUFJO0FBQ0wsV0FBUSxzQ0FBcUMsS0FBS1AsT0FBTCxDQUFhUSxJQUFLLGtEQUF4RCxHQUNKLCtGQURIO0FBRUQ7O0FBbEIwQzs7ZUFzQjlCWCxrQiIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGZzIH0gZnJvbSAnYXBwaXVtLXN1cHBvcnQnO1xuaW1wb3J0IHsgRG9jdG9yQ2hlY2sgfSBmcm9tICcuL2RvY3Rvcic7XG5pbXBvcnQgeyBvaywgbm9rIH0gZnJvbSAnLi91dGlscyc7XG5pbXBvcnQgJ2NvbG9ycyc7XG5cbi8vIENoZWNrIGVudiB2YXJpYWJsZXNcbmNsYXNzIEVudlZhckFuZFBhdGhDaGVjayBleHRlbmRzIERvY3RvckNoZWNrIHtcbiAgY29uc3RydWN0b3IgKHZhck5hbWUpIHtcbiAgICBzdXBlcigpO1xuICAgIHRoaXMudmFyTmFtZSA9IHZhck5hbWU7XG4gIH1cblxuICBhc3luYyBkaWFnbm9zZSAoKSB7XG4gICAgbGV0IHZhclZhbHVlID0gcHJvY2Vzcy5lbnZbdGhpcy52YXJOYW1lXTtcbiAgICBpZiAodHlwZW9mIHZhclZhbHVlID09PSAndW5kZWZpbmVkJykge1xuICAgICAgcmV0dXJuIG5vayhgJHt0aGlzLnZhck5hbWV9IGVudmlyb25tZW50IHZhcmlhYmxlIGlzIE5PVCBzZXQhYCk7XG4gICAgfVxuICAgIHJldHVybiBhd2FpdCBmcy5leGlzdHModmFyVmFsdWUpID8gb2soYCR7dGhpcy52YXJOYW1lfSBpcyBzZXQgdG86ICR7dmFyVmFsdWV9YCkgOlxuICAgICAgbm9rKGAke3RoaXMudmFyTmFtZX0gaXMgc2V0IHRvICcke3ZhclZhbHVlfScgYnV0IHRoaXMgaXMgTk9UIGEgdmFsaWQgcGF0aCFgKTtcbiAgfVxuXG4gIGZpeCAoKSB7XG4gICAgcmV0dXJuIGBNYWtlIHN1cmUgdGhlIGVudmlyb25tZW50IHZhcmlhYmxlICR7dGhpcy52YXJOYW1lLmJvbGR9IGlzIHByb3Blcmx5IGNvbmZpZ3VyZWQgZm9yIHRoZSBBcHBpdW0gcHJvY2Vzcy4gYCArXG4gICAgICBgUmVmZXIgaHR0cHM6Ly9naXRodWIuY29tL2FwcGl1bS9qYXZhLWNsaWVudC9ibG9iL21hc3Rlci9kb2NzL2Vudmlyb25tZW50Lm1kIGZvciBtb3JlIGRldGFpbHMuYDtcbiAgfVxufVxuXG5cbmV4cG9ydCBkZWZhdWx0IEVudlZhckFuZFBhdGhDaGVjaztcbiJdLCJmaWxlIjoibGliL2Vudi5qcyIsInNvdXJjZVJvb3QiOiIuLi8uLiJ9
